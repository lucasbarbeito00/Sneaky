/*!
 * Date picker for pickadate.js v3.6.4
 * http://amsul.github.io/pickadate.js/date.htm
 */!function(a){"function"==typeof define&&define.amd?define(["./picker","jquery"],a):"object"==typeof exports?module.exports=a(require("./picker.js"),require("jquery")):a(Picker,jQuery)}(function(e,b){var d,a=e._;function c(a,c){function e(){return d.currentStyle?"rtl"==d.currentStyle.direction:"rtl"==getComputedStyle(a.$root[0]).direction}var f,b=this,d=a.$node[0],i=d.value,g=a.$node.data("value"),h=g||i,j=g?c.formatSubmit:c.format;b.settings=c,b.$node=a.$node,b.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},b.item={},b.item.clear=null,b.item.disable=(c.disable||[]).slice(0),b.item.enable=-(!0===(f=b.item.disable)[0]?f.shift():-1),b.set("min",c.min).set("max",c.max).set("now"),h?b.set("select",h,{format:j,defaultValue:!0}):b.set("select",null).set("highlight",b.item.now),b.key={40:7,38:-7,39:function(){return e()?-1:1},37:function(){return e()?1:-1},go:function(c){var a=b.item.highlight,d=new Date(a.year,a.month,a.date+c);b.set("highlight",d,{interval:c}),this.render()}},a.on("render",function(){a.$root.find("."+c.klass.selectMonth).on("change",function(){var b=this.value;b&&(a.set("highlight",[a.get("view").year,b,a.get("highlight").date]),a.$root.find("."+c.klass.selectMonth).trigger("focus"))}),a.$root.find("."+c.klass.selectYear).on("change",function(){var b=this.value;b&&(a.set("highlight",[b,a.get("view").month,a.get("highlight").date]),a.$root.find("."+c.klass.selectYear).trigger("focus"))})},1).on("open",function(){var d="";b.disabled(b.get("now"))&&(d=":not(."+c.klass.buttonToday+")"),a.$root.find("button"+d+", select").attr("disabled",!1)},1).on("close",function(){a.$root.find("button, select").attr("disabled",!0)},1)}function f(c,d,a){var b=c.match(/[^\x00-\x7F]+|[a-zA-Z0-9_\u0080-\u00FF]+/)[0];return a.mm||a.m||(a.m=d.indexOf(b)+1),b.length}function g(a){return a.match(/[a-zA-Z0-9_\u0080-\u00FF]+/)[0].length}c.prototype.set=function(a,e,d){var b=this,c=b.item;return null===e?("clear"==a&&(a="select"),c[a]=e):(c["enable"==a?"disable":"flip"==a?"enable":a]=b.queue[a].split(" ").map(function(c){return e=b[c](a,e,d)}).pop(),"select"==a?b.set("highlight",c.select,d):"highlight"==a?b.set("view",c.highlight,d):a.match(/^(flip|min|max|disable|enable)$/)&&(c.select&&b.disabled(c.select)&&b.set("select",c.select,d),c.highlight&&b.disabled(c.highlight)&&b.set("highlight",c.highlight,d))),b},c.prototype.get=function(a){return this.item[a]},c.prototype.create=function(f,c,g){var d,e=this;return(c=void 0===c?f:c)==-1/0||c==1/0?d=c:c=b.isPlainObject(c)&&a.isInteger(c.pick)?c.obj:b.isArray(c)?(c=new Date(c[0],c[1],c[2]),a.isDate(c)?c:e.create().obj):a.isInteger(c)||a.isDate(c)?e.normalize(new Date(c),g):e.now(f,c,g),{year:d||c.getFullYear(),month:d||c.getMonth(),date:d||c.getDate(),day:d||c.getDay(),obj:d||c,pick:d||c.getTime()}},c.prototype.createRange=function(c,d){function e(c){return!0===c||b.isArray(c)||a.isDate(c)?f.create(c):c}var f=this;return a.isInteger(c)||(c=e(c)),a.isInteger(d)||(d=e(d)),a.isInteger(c)&&b.isPlainObject(d)?c=[d.year,d.month,d.date+c]:a.isInteger(d)&&b.isPlainObject(c)&&(d=[c.year,c.month,c.date+d]),{from:e(c),to:e(d)}},c.prototype.withinRange=function(a,b){return a=this.createRange(a.from,a.to),b.pick>=a.from.pick&&b.pick<=a.to.pick},c.prototype.overlapRanges=function(a,b){var c=this;return a=c.createRange(a.from,a.to),b=c.createRange(b.from,b.to),c.withinRange(a,b.from)||c.withinRange(a,b.to)||c.withinRange(b,a.from)||c.withinRange(b,a.to)},c.prototype.now=function(c,a,b){return a=new Date,b&&b.rel&&a.setDate(a.getDate()+b.rel),this.normalize(a,b)},c.prototype.navigate=function(k,a,e){var i,d,c,f,j=b.isArray(a),h=b.isPlainObject(a),g=this.item.view;if(j||h){for(f=h?(d=a.year,c=a.month,a.date):(d=+a[0],c=+a[1],+a[2]),e&&e.nav&&g&&g.month!==c&&(d=g.year,c=g.month),d=(i=new Date(d,c+(e&&e.nav?e.nav:0),1)).getFullYear(),c=i.getMonth();new Date(d,c,f).getMonth()!==c;)--f;a=[d,c,f]}return a},c.prototype.normalize=function(a){return a.setHours(0,0,0,0),a},c.prototype.measure=function(c,b){return a.isInteger(b)?b=this.now(c,b,{rel:b}):b?"string"==typeof b&&(b=this.parse(c,b)):b="min"==c?-1/0:1/0,b},c.prototype.viewset=function(b,a){return this.create([a.year,a.month,1])},c.prototype.validate=function(p,c,g){var l,j,o,n,d=this,k=c,e=g&&g.interval?g.interval:1,i=-1===d.item.enable,f=d.item.min,h=d.item.max,m=i&&d.item.disable.filter(function(e){var f;return b.isArray(e)&&((f=d.create(e).pick)<c.pick?l=!0:f>c.pick&&(j=!0)),a.isInteger(e)}).length;if((!g||!g.nav&&!g.defaultValue)&&(!i&&d.disabled(c)||i&&d.disabled(c)&&(m||l||j)||!i&&(c.pick<=f.pick||c.pick>=h.pick)))for(i&&!m&&(!j&&0<e||!l&&e<0)&&(e*=-1);d.disabled(c)&&(1<Math.abs(e)&&(c.month<k.month||c.month>k.month)&&(c=k,e=0<e?1:-1),c.pick<=f.pick?(o=!0,e=1,c=d.create([f.year,f.month,f.date+(c.pick===f.pick?0:-1)])):c.pick>=h.pick&&(n=!0,e=-1,c=d.create([h.year,h.month,h.date+(c.pick===h.pick?0:1)])),!o||!n);)c=d.create([c.year,c.month,c.date+e]);return c},c.prototype.disabled=function(d){var c=this,e=(e=c.item.disable.filter(function(e){return a.isInteger(e)?d.day===(e-c.settings.firstDay)%7:b.isArray(e)||a.isDate(e)?d.pick===c.create(e).pick:b.isPlainObject(e)?c.withinRange(e,d):void 0})).length&&!e.filter(function(a){return b.isArray(a)&&"inverted"==a[3]||b.isPlainObject(a)&&a.inverted}).length;return-1===c.item.enable?!e:e||d.pick<c.item.min.pick||d.pick>c.item.max.pick},c.prototype.parse=function(f,c,d){var e=this,b={};return c&&"string"==typeof c?(d&&d.format||((d=d||{}).format=e.settings.format),e.formats.toArray(d.format).map(function(d){var f=e.formats[d],g=f?a.trigger(f,e,[c,b]):d.replace(/^!/,"").length;f&&(b[d]=c.substr(0,g)),c=c.substr(g)}),[b.yyyy||b.yy,(b.mm||b.m)-1,b.dd||b.d]):c},c.prototype.formats={d:function(b,c){return b?a.digits(b):c.date},dd:function(b,c){return b?2:a.lead(c.date)},ddd:function(a,b){return a?g(a):this.settings.weekdaysShort[b.day]},dddd:function(a,b){return a?g(a):this.settings.weekdaysFull[b.day]},m:function(b,c){return b?a.digits(b):c.month+1},mm:function(b,c){return b?2:a.lead(c.month+1)},mmm:function(a,b){var c=this.settings.monthsShort;return a?f(a,c,b):c[b.month]},mmmm:function(a,b){var c=this.settings.monthsFull;return a?f(a,c,b):c[b.month]},yy:function(a,b){return a?2:(""+b.year).slice(2)},yyyy:function(a,b){return a?4:b.year},toArray:function(a){return a.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(c,d){var b=this;return b.formats.toArray(c).map(function(c){return a.trigger(b.formats[c],b,[0,d])||c.replace(/^!/,"")}).join("")}},c.prototype.isDateExact=function(c,d){return a.isInteger(c)&&a.isInteger(d)||"boolean"==typeof c&&"boolean"==typeof d?c===d:(a.isDate(c)||b.isArray(c))&&(a.isDate(d)||b.isArray(d))?this.create(c).pick===this.create(d).pick:!(!b.isPlainObject(c)||!b.isPlainObject(d))&&this.isDateExact(c.from,d.from)&&this.isDateExact(c.to,d.to)},c.prototype.isDateOverlap=function(c,d){var e=this.settings.firstDay;return a.isInteger(c)&&(a.isDate(d)||b.isArray(d))?(c=(c+e)%7+1)===this.create(d).day+1:a.isInteger(d)&&(a.isDate(c)||b.isArray(c))?(d=(d+e)%7+1)===this.create(c).day+1:!(!b.isPlainObject(c)||!b.isPlainObject(d))&&this.overlapRanges(c,d)},c.prototype.flipEnable=function(b){var a=this.item;a.enable=b||(-1==a.enable?1:-1)},c.prototype.deactivate=function(f,e){var d=this,c=d.item.disable.slice(0);return"flip"==e?d.flipEnable():!1===e?(d.flipEnable(1),c=[]):!0===e?(d.flipEnable(-1),c=[]):e.map(function(e){for(var g,f=0;f<c.length;f+=1)if(d.isDateExact(e,c[f])){g=!0;break}g||(a.isInteger(e)||a.isDate(e)||b.isArray(e)||b.isPlainObject(e)&&e.from&&e.to)&&c.push(e)}),c},c.prototype.activate=function(g,e){var d=this,c=d.item.disable,f=c.length;return"flip"==e?d.flipEnable():!0===e?(d.flipEnable(1),c=[]):!1===e?(d.flipEnable(-1),c=[]):e.map(function(g){for(var h,i,j,e=0;e<f;e+=1){if(i=c[e],d.isDateExact(i,g)){j=!(h=c[e]=null);break}if(d.isDateOverlap(i,g)){b.isPlainObject(g)?(g.inverted=!0,h=g):b.isArray(g)?(h=g)[3]||h.push("inverted"):a.isDate(g)&&(h=[g.getFullYear(),g.getMonth(),g.getDate(),"inverted"]);break}}if(h)for(e=0;e<f;e+=1)if(d.isDateExact(c[e],g)){c[e]=null;break}if(j)for(e=0;e<f;e+=1)if(d.isDateOverlap(c[e],g)){c[e]=null;break}h&&c.push(h)}),c.filter(function(a){return null!=a})},c.prototype.nodes=function(h){function n(e){return a.node("div"," ",b.klass["nav"+(e?"Next":"Prev")]+(e&&d.year>=f.year&&d.month>=f.month||!e&&d.year<=g.year&&d.month<=g.month?" "+b.klass.navDisabled:""),"data-nav="+(e||-1)+' tabindex="0" '+a.ariaAttr({role:"button",controls:c.$node[0].id+"_table"})+' title="'+(e?b.labelMonthNext:b.labelMonthPrev)+'"')}function m(){var e=b.showMonthsShort?b.monthsShort:b.monthsFull;return b.selectMonths?a.node("select",a.group({min:0,max:11,i:1,node:"option",item:function(a){return[e[a],0,"value="+a+(d.month==a?" selected":"")+(d.year==g.year&&a<g.month||d.year==f.year&&a>f.month?" disabled":"")]}}),b.klass.selectMonth,(h?"":"disabled")+" "+a.ariaAttr({controls:c.$node[0].id+"_table"})+' title="'+b.labelMonthSelect+'"'):a.node("div",e[d.month],b.klass.month)}function l(){var k=d.year,m=!0===b.selectYears?5:~~(b.selectYears/2),n,o,j,l,e,i;return m?(j=g.year,l=f.year,e=k-m,i=k+m,e<j&&(i+=j-e,e=j),l<i&&(e-=(o=i-l)<(n=e-j)?o:n,i=l),a.node("select",a.group({min:e,max:i,i:1,node:"option",item:function(a){return[a,0,"value="+a+(k==a?" selected":"")]}}),b.klass.selectYear,(h?"":"disabled")+" "+a.ariaAttr({controls:c.$node[0].id+"_table"})+' title="'+b.labelYearSelect+'"')):a.node("div",k,b.klass.year)}var c=this,b=c.settings,e=c.item,i=e.now,j=e.select,k=e.highlight,d=e.view,o=e.disable,g=e.min,f=e.max,p=function(c,d){for(var e=0;e<b.firstDay;e++)c.push(c.shift()),d.push(d.shift());return a.node("thead",a.node("tr",a.group({min:0,max:6,i:1,node:"th",item:function(a){return[c[a],b.klass.weekdays,'scope=col title="'+d[a]+'"']}})))}((b.showWeekdaysFull?b.weekdaysFull:b.weekdaysShort).slice(0),b.weekdaysFull.slice(0));return a.node("div",(b.selectYears?l()+m():m()+l())+n()+n(1),b.klass.header)+a.node("table",p+a.node("tbody",a.group({min:0,max:5,i:1,node:"tr",item:function(e){var h=c.create([d.year,d.month,1]).day<b.firstDay?-7:0;return[a.group({min:7*e-d.day+h+1,max:function(){return this.min+7-1},i:1,node:"td",item:function(e){e=c.create([d.year,d.month,e+b.firstDay]);var h,l=j&&j.pick==e.pick,m=k&&k.pick==e.pick,n=o&&c.disabled(e)||e.pick<g.pick||e.pick>f.pick,p=a.trigger(c.formats.toString,c,[b.format,e]),q=b.id+"_"+e.pick;return[a.node("div",e.date,((h=[b.klass.day]).push(d.month==e.month?b.klass.infocus:b.klass.outfocus),i.pick==e.pick&&h.push(b.klass.now),l&&h.push(b.klass.selected),m&&h.push(b.klass.highlighted),n&&h.push(b.klass.disabled),h.join(" ")),"data-pick="+e.pick+" id="+q+' tabindex="0" '+a.ariaAttr({role:"gridcell",label:p,selected:!(!l||c.$node.val()!==p)||null,activedescendant:m?e.pick:null,disabled:!!n||null})),""]}})]}})),b.klass.table,'id="'+c.$node[0].id+'_table" '+a.ariaAttr({role:"grid",controls:c.$node[0].id,readonly:!0}))+a.node("div",a.node("button",b.today,b.klass.buttonToday,"type=button data-pick="+i.pick+(h&&!c.disabled(i)?"":" disabled")+" "+a.ariaAttr({controls:c.$node[0].id}))+a.node("button",b.clear,b.klass.buttonClear,"type=button data-clear=1"+(h?"":" disabled")+" "+a.ariaAttr({controls:c.$node[0].id}))+a.node("button",b.close,b.klass.buttonClose,"type=button data-close=true "+(h?"":" disabled")+" "+a.ariaAttr({controls:c.$node[0].id})),b.klass.footer)},c.defaults={labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",closeOnSelect:!0,closeOnClear:!0,updateInput:!0,format:"d mmmm, yyyy",klass:{table:(d=e.klasses().picker+"__")+"table",header:d+"header",navPrev:d+"nav--prev",navNext:d+"nav--next",navDisabled:d+"nav--disabled",month:d+"month",year:d+"year",selectMonth:d+"select--month",selectYear:d+"select--year",weekdays:d+"weekday",day:d+"day",disabled:d+"day--disabled",selected:d+"day--selected",highlighted:d+"day--highlighted",now:d+"day--today",infocus:d+"day--infocus",outfocus:d+"day--outfocus",footer:d+"footer",buttonClear:d+"button--clear",buttonToday:d+"button--today",buttonClose:d+"button--close"}},e.extend("pickadate",c)})