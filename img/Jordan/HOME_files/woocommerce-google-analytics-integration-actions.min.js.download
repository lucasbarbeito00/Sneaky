(()=>{"use strict";const e=window.wp.i18n,b="woocommerce-google-analytics",c="experimental__woocommerce_blocks",n=window.wp.hooks,g=(a,b)=>({id:k(a),name:a.name,quantity:b,category:l(a),price:h(a.prices.price,a.prices.currency_minor_unit)}),j=(a,b)=>({id:k(a),name:a.name,list_name:b,category:l(a),price:h(a.prices.price,a.prices.currency_minor_unit)}),h=function(a){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(parseInt(a,10)/10**b).toString()},a=(a,b,c)=>{(0,n.removeAction)(a,b),(0,n.addAction)(a,b,c)},k=a=>a.sku?a.sku:"#"+a.id,l=a=>"categories"in a&&a.categories.length?a.categories[0].name:"";let i=-1;const f=a=>c=>{let{storeCart:b}=c;i!==a&&(d(0===a?"begin_checkout":"checkout_progress",{items:b.cartItems.map(g),coupon:b.cartCoupons[0]?.code||"",currency:b.cartTotals.currency_code,value:h(b.cartTotals.total_price,b.cartTotals.currency_minor_unit),checkout_step:a}),i=a)},m=b=>{let{step:a,option:c,value:e}=b;return()=>{d("set_checkout_option",{checkout_step:a,checkout_option:c,value:e}),i=a}},d=(a,b)=>{if("function"!=typeof gtag)throw new Error("Function gtag not implemented.");window.gtag("event",a,b)};a(`${c}-checkout-render-checkout-form`,b,a=>{let{...b}=a;return f(0)(b)}),a(`${c}-checkout-set-email-address`,b,a=>{let{...b}=a;return f(1)(b)}),a(`${c}-checkout-set-shipping-address`,b,a=>{let{...b}=a;return f(2)(b)}),a(`${c}-checkout-set-billing-address`,b,a=>{let{...b}=a;return f(3)(b)}),a(`${c}-checkout-set-phone-number`,b,a=>{let{step:b,...c}=a;f("shipping"===b?2:3)(c)}),a(`${c}-checkout-set-selected-shipping-rate`,b,a=>{let{shippingRateId:b}=a;m({step:4,option:(0,e.__)("Shipping Method","woo-gutenberg-products-block"),value:b})()}),a(`${c}-checkout-set-active-payment-method`,b,a=>{let{paymentMethodSlug:b}=a;m({step:5,option:(0,e.__)("Payment Method","woo-gutenberg-products-block"),value:b})()}),a(`${c}-product-list-render`,b,a=>{let{products:b,listName:c=(0,e.__)("Product List","woocommerce-google-analytics-integration")}=a;d("view_item_list",{event_category:"engagement",event_label:(0,e.__)("Viewing products","woocommerce-google-analytics-integration"),items:b.map((a,b)=>({...j(a,c),list_position:b+1}))})}),a(`${c}-cart-add-item`,b,a=>{let{product:b,quantity:c=1}=a;d("add_to_cart",{event_category:"ecommerce",event_label:(0,e.__)("Add to Cart","woocommerce-google-analytics-integration"),items:[g(b,c)]})}),a(`${c}-cart-set-item-quantity`,b,a=>{let{product:b,quantity:c=1}=a;d("change_cart_quantity",{event_category:"ecommerce",event_label:(0,e.__)("Change Cart Item Quantity","woocommerce-google-analytics-integration"),items:[g(b,c)]})}),a(`${c}-cart-remove-item`,b,a=>{let{product:b,quantity:c=1}=a;d("remove_from_cart",{event_category:"ecommerce",event_label:(0,e.__)("Remove Cart Item","woocommerce-google-analytics-integration"),items:[g(b,c)]})}),a(`${c}-checkout-submit`,b,()=>{d("add_payment_info")}),a(`${c}-product-view-link`,b,a=>{let{product:b,listName:c=(0,e.__)("Product List","woocommerce-google-analytics-integration")}=a;d("select_content",{content_type:"product",items:[j(b,c)]})}),a(`${c}-product-search`,b,a=>{let{searchTerm:b}=a;d("search",{search_term:b})}),a(`${c}-product-render`,b,b=>{let{product:a,listName:c=(0,e.__)("Product List","woocommerce-google-analytics-integration")}=b;a&&d("view_item",{items:[j(a,c)]})}),a(`${c}-store-notice-create`,b,a=>{let{status:b,content:c}=a;"error"===b&&d("exception",{description:c,fatal:!1})})})()